!function(a,b,c,d,e){"use strict";var f="https:"==c.location.protocol?"https:":"http:";return b.GeoJSON.Sealevel=b.GeoJSON.extend({options:{url:"../json/sealevel_stations_denmark.json",onEachFeature:function(d,e){e.on({click:function(g){var h=a("<div/>"),i='<h3 class="leaflet-layer-sealevel-denmark-header">${name} - ${position}</h3>',j=b.latLng(d.geometry.coordinates[1],d.geometry.coordinates[0]),k=i.replace("${name}",d.properties.nameDK);k=k.replace("${position}",j.asFormat().join("&nbsp;&nbsp;&nbsp;")),h.append(a(k));var l=f+"//chart.fcoo.dk/station_timeseries.asp?s=:003${stationId}:046SeaLvl:002DK:001DEFAULT:04d620:04e400:04f0:04a1:04b48:04i0:04c1:04g0:0641:05opopup",m=l.replace("${stationId}",d.properties.id),n=function(b){var d=!0;if("undefined"!=typeof c.matchMedia||"undefined"!=typeof c.msMatchMedia){var e=c.matchMedia("(min-width: 661px)");d=e.matches}var f;if(d)f=a('<img src="'+b+'" height="400" width="620" />');else{var g=41,h=73,i=a(c).width(),j=a(c).height(),k=parseInt(.95*i-g),l=parseInt(.95*j-h),m=400/620,n=m*k;if(n>l){var o=l/n;n=l,k=o*k}n=Math.max(n,0),k=Math.max(k,0),f=a('<img src="'+b+'" height="'+n+'" width="'+k+'" />')}return f},o=n(m);h.append(o);var p=h.html(),q=b.popup({maxWidth:700,maxHeight:600}).setLatLng(g.latlng).setContent(p);e._map.openPopup(q);var r=function(){var a=n(m);h.find("img").replaceWith(a),q.setContent(h.html())};a(c).on("resize orientationchange",r),e._map.on("popupclose",function(){a(c).off("resize orientationchange",r)})}})},pointToLayer:function(a,c){return b.circleMarker(c,{radius:7,fillColor:"#ff7800",color:"#000",weight:1,opacity:1,fillOpacity:.8})}},initialize:function(d){var e,f=this;b.setOptions(this,d),this._layers={},this.jqxhr=a.getJSON(this.options.url),this.jqxhr.done(function(a){f.addData(a)}),this.jqxhr.fail(function(){e="Failure retrieving station positions from "+f.options.url,c.noty({text:e,type:"error"})})},onAdd:function(a){var c=this;this.jqxhr.done(function(){b.GeoJSON.prototype.onAdd.call(c,a)})}}),b.GeoJSON.Sealevel}(jQuery,L,this,document);